/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("./utils/itemUtils.js"),I=require("./utils/itemIdUtils.js"),h=require("./utils/misc.js"),x=require("./utils/consts.js");function m(i,t,n,s={},d){if(!n||!n.length)return[];const{ids:c,idField:r}=O(t),l=r?h.getNestedValue(r,i.item):i.itemHierarchicalIndex,u=c.indexOf(l),f=u===-1,a=d||x.CHILDREN_FIELD;let e;return s.singleMode?e=f?[l]:[]:(e=c.slice(),f?e.push(l):e.splice(u,1),s.checkChildren&&k(i.item,i.itemHierarchicalIndex,f,r,a,e),s.checkParents&&p(i.itemHierarchicalIndex,f,r,a,e,n)),h.isArray(t)?e:Object.assign({},t,{ids:e})}function O(i){let t,n;return h.isArray(i)?t=i:(t=i.ids||[],n=i.idField),{ids:t,idField:n}}function k(i,t,n,s,d,c){g.getAllDirectIndirectChildrenIds(i,t,d,s).forEach(r=>{n&&c.indexOf(r)===-1?c.push(r):!n&&c.indexOf(r)>-1&&c.splice(c.indexOf(r),1)})}function p(i,t,n,s,d,c){const r=a();let l=r.next();t?u():f();function u(){for(;!l.done;){const{id:e,item:o}=l.value;if(d.indexOf(e)===-1&&g.areAllDirectChildrenChecked(o,e,n,s,d))d.push(e),l=r.next();else break}}function f(){for(;!l.done;){const{id:e}=l.value,o=d.indexOf(e);if(o>-1)d.splice(o,1),l=r.next();else break}}function*a(){if(n){const e=g.getAllParents(i,s,c);for(let o=e.length-1;o>-1;o--)yield{id:h.getNestedValue(n,e[o]),item:t?e[o]:void 0}}else{let e=I.getDirectParentId(i);for(;e;)yield{id:e,item:t?I.getItemById(e,c,s):void 0},e=I.getDirectParentId(e)}}}exports.handleTreeViewCheckChange=m;
